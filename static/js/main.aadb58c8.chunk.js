(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var a=n(122),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"fd622230-6210-4ef3-a457-276f95f589d0"}}),i={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("/users?page=".concat(e,"&count=").concat(t))},follow:function(e){return r.post("/follow/"+e)},unfollow:function(e){return r.delete("/follow/"+e)}},o={getProfile:function(e){return r.get("/profile/"+e)},getStatus:function(e){return r.get("/profile/status/"+e).then((function(e){return e}))},updateStatus:function(e){return r.put("profile/status",{status:e})},updateProfilePicture:function(e){var t=new FormData;return t.append("image",e.files[0]),r.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return r.put("/profile",e)}},c={getAuthMe:function(){return r.get("auth/me")},signIn:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:a})},logOut:function(){return r.delete("/auth/login")},getCaptcha:function(){return r.get("/security/get-captcha-url")}},u={getCaptchaUrl:function(){return r.get("/security/get-captcha-url")}},s={startCommunication:function(e){return r.put("/dialogs/"+e)},getAllDialogs:function(){return r.get("/dialogs")}},l={getMessages:function(e,t,n){return r.get("/dialogs/".concat(e,"/messages?page=").concat(t,"&count=").concat(n))},sendMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.post("/dialogs/".concat(e,"/messages"),{message:t})},messageViewed:function(e){return r.get("/dialogs/messages/".concat(e,"/viewed"))},deleteOnlyYouMessage:function(e){return r.delete("/dialogs/messages/".concat(e))},addMessageSpam:function(e){return r.post("/dialogs/messages/".concat(e,"/spam"))},restoreYourMessage:function(e){return r.put("/dialogs/messages/".concat(e,"/restore"))},return_messages_newest_than_date:function(e,t){return r.put("/dialogs/".concat(e,"/messages/new?newerThen=").concat(t))},getNewMessages:function(){return r.get("/dialogs/messages/new/count")}}},116:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return E}));var a=n(3),r=n.n(a),i=n(8),o=n(5),c=n(1),u=n(11),s=n(28),l={users:[],defaultAvatarSrc:s.a,pagesSize:5,totalUsersCount:0,isFetching:!1,isFetchingFollowOrUnfollowIdList:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(c.a)(Object(c.a)({},e),{},{users:Object(o.a)(t.users)});case"FOLLOW":return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id&&(e.followed=!0),e}))});case"UNFOLLOW":return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id&&(e.followed=!1),e}))});case"SET_TOTAL_USERS_COUNT":return Object(c.a)(Object(c.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return t.isFetching?Object(c.a)(Object(c.a)({},e),{},{isFetching:!0}):Object(c.a)(Object(c.a)({},e),{},{isFetching:!1});case"IS_FETCHING_FOLLOW_OR_UNFOLLOW_START":return Object(c.a)(Object(c.a)({},e),{},{isFetchingFollowOrUnfollowIdList:[].concat(Object(o.a)(e.isFetchingFollowOrUnfollowIdList),[t.id])});case"IS_FETCHING_FOLLOW_OR_UNFOLLOW_END":var n=e.isFetchingFollowOrUnfollowIdList.filter((function(e){return e!==t.id}));return Object(c.a)(Object(c.a)({},e),{},{isFetchingFollowOrUnfollowIdList:n});default:return e}};var f=function(e){return{type:"FOLLOW",id:e}},p=function(e){return{type:"UNFOLLOW",id:e}},g=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},m=function(e){return{type:"IS_FETCHING_FOLLOW_OR_UNFOLLOW_START",id:e}},d=function(e){return{type:"IS_FETCHING_FOLLOW_OR_UNFOLLOW_END",id:e}},h=function(e,t){return function(){var n=Object(i.a)(r.a.mark((function n(a){var i,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=g(!0),a(i),n.next=4,u.f.getUsers(e,t);case 4:200===(o=n.sent).status&&(c=o.data.items,a(i={type:"SET_USERS",users:c}),r=o.data.totalCount,a(i={type:"SET_TOTAL_USERS_COUNT",totalUsersCount:r}),i=g(!1),a(i));case 6:case"end":return n.stop()}var r,c}),n)})));return function(e){return n.apply(this,arguments)}}()},O=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=m(n),t(o),e.next=4,a(n);case 4:0===e.sent.data.resultCode&&(o=i(n),t(o)),o=d(n),t(o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(n,e,u.f.follow.bind(u.f),f);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(n,e,u.f.unfollow.bind(u.f),p);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},120:function(e,t,n){e.exports={container:"App_container__X7H-1"}},121:function(e,t,n){e.exports={leftPanelWrapper:"LeftPanel_leftPanelWrapper__2hj57"}},124:function(e,t,n){e.exports={container:"FriendList_container__12GGK"}},125:function(e,t,n){e.exports={HeaderContainer:"Header_HeaderContainer__3RWNQ"}},13:function(e,t,n){e.exports={NavigationContainer:"Navigation_NavigationContainer__2tfGY",NavigationContainer__list:"Navigation_NavigationContainer__list__23NXS",NavigationContainer__item:"Navigation_NavigationContainer__item__1o3bX",NavigationContainer__link:"Navigation_NavigationContainer__link___40hU",active:"Navigation_active__3eftc"}},174:function(e,t,n){e.exports=n(294)},199:function(e,t,n){e.exports=n.p+"static/media/avatar.d48a8973.png"},200:function(e,t,n){e.exports=n.p+"static/media/signIn.66b9eed0.png"},201:function(e,t,n){e.exports=n.p+"static/media/signUp.e6f42918.png"},202:function(e,t,n){e.exports=n.p+"static/media/logOut.a4e6b624.png"},21:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(200),r=n(201),i=n(202),o=2},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=n(199)},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(120),o=n.n(i),c=n(121),u=n.n(c),s=n(6),l=n(7),f=n(14),p=n(15),g=n(13),m=n.n(g),d=n(17),h=function(e){var t=e.clickProfileLink;return r.a.createElement("header",null,r.a.createElement("div",{className:m.a.NavigationContainer},r.a.createElement("ul",{className:m.a.NavigationContainer__list},r.a.createElement("li",{className:m.a.NavigationContainer__item},r.a.createElement(d.b,{onClick:t,activeClassName:m.a.active,className:m.a.NavigationContainer__link,to:"/Profile"},"Profile")),r.a.createElement("li",{className:m.a.NavigationContainer__item},r.a.createElement(d.b,{activeClassName:m.a.active,className:m.a.NavigationContainer__link,to:"/dialogs"},"Dialogs")),r.a.createElement("li",{className:m.a.NavigationContainer__item},r.a.createElement(d.b,{activeClassName:m.a.active,className:m.a.NavigationContainer__link,to:"/news"},"News")),r.a.createElement("li",{className:m.a.NavigationContainer__item},r.a.createElement(d.b,{activeClassName:m.a.active,className:m.a.NavigationContainer__link,to:"/music"},"Music")),r.a.createElement("li",{className:m.a.NavigationContainer__item},r.a.createElement(d.b,{activeClassName:m.a.active,className:m.a.NavigationContainer__link,to:"/users"},"Users")),r.a.createElement("li",{className:m.a.NavigationContainer__item},r.a.createElement(d.b,{activeClassName:m.a.active,className:m.a.NavigationContainer__link,to:"/settings"},"Settings")))))},O=n(32),_=n(18),E=n(25),v=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).clickProfileLink=function(){e.props.isAuth||console.log("\u041d\u0430\u0434\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043b\u043e\u0433\u0438\u043d\u0438\u0437\u0430\u0446\u0438\u044e, \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0430\u043d\u043e\u043d\u0438\u043c\u043d\u044b\u0439!")},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.isAuth||console.log("\u041d\u0430\u0434\u043e \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435, \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0430\u043d\u043e\u043d\u0438\u043c\u043d\u044b\u0439."),r.a.createElement(h,{clickProfileLink:this.clickProfileLink})}}]),n}(r.a.Component),b=Object(_.d)(Object(E.b)((function(e){return{redrawToProfileComponent:e.profilePage.redrawToProfileComponent,isAuth:e.auth.isAuth}}),{getProfile:O.c,lookingMyProfile:O.e}))(v),T=n(124),N=n.n(T),j=n(65),I=n.n(j),C=n(28),A=function(e){var t=e.srcPhoto,n=e.clickProfileUser,a=e.id,i=e.name;return t=t||C.a,r.a.createElement(d.b,{onClick:function(){return n(a)},className:I.a.friendContainer,to:"/Profile/".concat(a)},r.a.createElement("img",{className:I.a.photo,src:t}),r.a.createElement("p",{className:I.a.name},i))},P=function(e){var t=e.friendList,n=e.clickProfileUser,a=t.length?N.a.container:"",i=t.map((function(e){return r.a.createElement(A,{id:e.id,srcPhoto:e.photos.small,name:e.name,clickProfileUser:n})}));return r.a.createElement("div",{className:a},i)},L=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).clickProfileUser=function(t){e.props.getProfile(t),e.props.notLookingMyProfile()},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(P,{friendList:this.props.friendList,clickProfileUser:this.clickProfileUser})}}]),n}(r.a.Component),S=Object(_.d)(Object(E.b)((function(e){return{friendList:e.usersPage.users.filter((function(e){return e.followed}))}}),{getProfile:O.c,notLookingMyProfile:O.f}))(L),w=function(){return r.a.createElement("div",{className:u.a.leftPanelWrapper},r.a.createElement(b,null),r.a.createElement(S,null))},x=n(125),y=n.n(x),F=n(3),k=n.n(F),U=n(8),G=n(36),z=n.n(G),M=n(66),R=n.n(M),H=function(e){var t=e.onClickF,n=e.srcImg,a=e.text;return r.a.createElement(d.b,{onClick:t,activeClassName:"",className:R.a.authorizationItem,to:"/authorization"},r.a.createElement("img",{className:R.a.authorizationImg,alt:"authorization",src:n,width:100,height:100}),r.a.createElement("p",{className:R.a.authorizationText},a))},D=n(21),W=function(e){var t=e.isAuth,n=e.authorizationInfo,a=e.logOutClick,i=e.signInOnClick,o=e.signUpOnClick;return t?r.a.createElement("div",{className:z.a.authorizationPanelWrapper},r.a.createElement("div",{className:z.a.authorizationPanelInfo},r.a.createElement("p",{className:z.a.infoText},"\u0410\u0439\u0434\u0438: "+n.userId),r.a.createElement("p",{className:z.a.infoText},"\u041b\u043e\u0433\u0438\u043d: "+n.login),r.a.createElement("p",{className:z.a.infoText},"\u041f\u043e\u0447\u0442\u0430: "+n.email)),r.a.createElement("div",{className:z.a.authorizationPanel},r.a.createElement(H,{text:"\u0412\u044b\u0439\u0442\u0438",onClickF:a,srcImg:D.b}))):r.a.createElement("div",{className:z.a.authorizationPanel},r.a.createElement(H,{text:"\u0412\u043e\u0439\u0442\u0438",onClickF:i,srcImg:D.c}),r.a.createElement(H,{text:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onClickF:o,srcImg:D.d}))},q=n(1),X=n(71),J=n(11),Y={userId:D.a,isAuth:!1,logoutFetching:!1,email:null,login:null,captchaUrl:null,signInImg:D.c,signUpImg:D.d,logOutImg:D.b},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(q.a)(Object(q.a)(Object(q.a)({},e),t.data),{},{isAuth:t.isAuth});case"SIGN_IN":return Object(q.a)(Object(q.a)({},e),{},{isAuth:!0});case"SIGN_UP":return Object(q.a)(Object(q.a)({},e),{},{isAuth:t.isAuth});case"LOG_OUT":return Object(q.a)(Object(q.a)({},e),{},{isAuth:!1});case"START_LOGOUT_FETCHING":return Object(q.a)(Object(q.a)({},e),{},{logoutFetching:!0});case"END_LOGOUT_FETCHING":return Object(q.a)(Object(q.a)({},e),{},{logoutFetching:!1});case"GET_CAPTCHA":return Object(q.a)(Object(q.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:"SET_USER_DATA",data:{userId:e,email:t,login:n},isAuth:a}},B=function(e){return{type:"GET_CAPTCHA",captchaUrl:e}},Q=function(){return function(){var e=Object(U.a)(k.a.mark((function e(t){var n,a,r,i,o,c,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.getAuthMe();case 2:return 0===(n=e.sent).data.resultCode?(a=n.data.data,r=a.id,i=a.email,o=a.login,c=V(r,i,o,!0),t(c)):2===n.data.resultCode&&(u=V(D.a),t(u)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).signInOnClick=function(){console.log("\u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0445\u043e\u0434\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443")},e.signUpOnClick=function(){console.log("\u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438")},e.logOutClick=Object(U.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("\u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"),t.next=3,e.props.logOut();case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(W,{signInImg:this.props.signInImg,signUpImg:this.props.signUpImg,logOutImg:this.props.logOutImg,signInOnClick:this.signInOnClick,signUpOnClick:this.signUpOnClick,logOutClick:this.logOutClick,isAuth:this.props.isAuth,authorizationInfo:this.props.authorizationInfo,profile:this.props.profilePage})}}]),n}(r.a.Component),$=Object(_.d)(Object(E.b)((function(e){return{isAuth:e.auth.isAuth,authorizationInfo:{userId:e.auth.userId,email:e.auth.email,login:e.auth.login},signInImg:e.auth.signInImg,signUpImg:e.auth.signUpImg,logOutImg:e.auth.logOutImg}}),{logOut:function(){return function(){var e=Object(U.a)(k.a.mark((function e(t,n){var a,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(a={type:"START_LOGOUT_FETCHING"}),e.next=4,J.a.logOut();case 4:return 0===(r=e.sent).data.resultCode&&(i=V(D.a),t(i)),a=function(e){e({type:"END_LOGOUT_FETCHING"})},t(a),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},authMe:Q}))(Z),ee=function(){return r.a.createElement("header",null,r.a.createElement("div",{className:y.a.HeaderContainer},r.a.createElement($,null)))},te=(n(84),function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f!"))}),ne=n(12),ae=n(60),re=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))},ie=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(re,null)},r.a.createElement(e,t))}},oe=n(50),ce=n.n(oe),ue=n(39),se=n(119),le=n(64),fe=function(e){var t=e.handleRegistration,n=e.captchaUrl,a=le.a().shape({login:le.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.").min(2,"\u041c\u0438\u043d\u0438\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430!").max(50,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").matches(/[@]/,"\u0421\u0438\u043c\u0432\u043e\u043b @ \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d"),password:le.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.").min(2,"\u041c\u0438\u043d\u0438\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430!").max(50,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),i=Object(ue.d)({mode:"onBlur",resolver:Object(se.a)(a)}),o=i.register,c=i.formState,u=i.handleSubmit,s=c.errors,l=c.touchedFields;return r.a.createElement("form",{onSubmit:u(t)},r.a.createElement("div",null,r.a.createElement("input",Object.assign({placeholder:"\u041b\u043e\u0433\u0438\u043d",type:"text",className:s.login&&ce.a.inCorrect||l.login&&ce.a.correct},o("login"))),s.login&&r.a.createElement("p",null,s.login.message)),r.a.createElement("div",null,r.a.createElement("input",Object.assign({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:s.password&&ce.a.inCorrect||l.password&&ce.a.correct,type:"password"},o("password"))),s.password&&r.a.createElement("p",null,s.password.message)),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"checkbox"},o("rememberMe")))," \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"),r.a.createElement("button",null,"\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0438\u0442\u044c\u0441\u044f"),r.a.createElement("div",null,n&&r.a.createElement("img",{src:n}),n&&r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"text"},o("captcha"))))))},pe=Object(E.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{signIn:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return function(){var r=Object(U.a)(k.a.mark((function r(i){var o,c,u,s;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,J.a.signIn(e,t,n,a);case 2:if(0!==(o=r.sent).data.resultCode){r.next=8;break}c=Q(),i(c),r.next=17;break;case 8:return u=Q(),i(u),u=Object(X.a)("authorization",{_error:o.data.messages[0]}),i(u),r.next=14,J.e.getCaptchaUrl();case 14:s=r.sent,u=B(s.data.url),i(u);case 17:return r.abrupt("return",o);case 18:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.signIn,n=e.isAuth,a=e.captchaUrl;return n?r.a.createElement(ne.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(fe,{handleRegistration:function(e){t(e.login,e.password,e.rememberMe,e.captcha)},captchaUrl:a}))})),ge=r.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,347))})),me=r.a.lazy((function(){return n.e(6).then(n.bind(null,348))})),de=r.a.lazy((function(){return n.e(5).then(n.bind(null,349))})),he=r.a.lazy((function(){return n.e(7).then(n.bind(null,350))})),Oe=Object(E.b)((function(e){return{initialize:e.app.initializeTheApplication}}),{authMe:Q,initializeTheApplication:ae.c})((function(e){return Object(a.useEffect)((function(){return e.authMe().then((function(t){e.initializeTheApplication(!0)})),function(){}}),[]),e.initialize?r.a.createElement("div",null,e.initialize&&r.a.createElement("div",null,r.a.createElement(ee,null),r.a.createElement("div",{className:o.a.container},r.a.createElement(w,null),r.a.createElement(ne.d,null,r.a.createElement(ne.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ne.a,{to:"/profile"})}}),r.a.createElement(ne.b,{path:"/dialogs",render:ie(me)}),r.a.createElement(ne.b,{path:"/messages/:userId?",render:ie(he)}),r.a.createElement(ne.b,{path:"/profile/:userId?",render:ie(ge)}),r.a.createElement(ne.b,{path:"/users",render:ie(de)}),r.a.createElement(ne.b,{path:"/authorization",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(ne.b,{path:"*",render:function(){return r.a.createElement("h2",null,"Error 404, not found!")}}))))):r.a.createElement(te,null)})),_e=n(59),Ee=n.n(_e),ve=n(91),be=n(92),Te=n(116),Ne=n(129),je=n(118),Ie=Object(_.c)({profilePage:O.b,dialogsPage:ve.a,messagesPage:be.a,usersPage:Te.a,auth:K,form:je.a,app:ae.b}),Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.d,Ae=Object(_.e)(Ie,Ce(Object(_.a)(Ne.a)));window.store=Ae;var Pe=Ae;Ee.a.render(r.a.createElement(d.a,null,r.a.createElement(E.a,{store:Pe},r.a.createElement(Oe,null))),document.getElementById("root"))},32:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return _})),n.d(t,"d",(function(){return E})),n.d(t,"i",(function(){return v})),n.d(t,"g",(function(){return b}));var a=n(3),r=n.n(a),i=n(8),o=n(5),c=n(1),u=n(11),s=n(28),l=n(21),f={posts:[{content:"alo",imgSrc:"http://sun9-44.userapi.com/s/v1/if1/qw3vWR63rnWIPexrEErujILvop-GpxX8MJRJx1emFNrgy2Ve9Hf3sqh5NLHETJNtyNMxaiTe.jpg?size=200x0&quality=96&crop=18,0,586,594&ava=1",countLikes:"1"},{content:"helo",imgSrc:"http://sun9-44.userapi.com/s/v1/if1/qw3vWR63rnWIPexrEErujILvop-GpxX8MJRJx1emFNrgy2Ve9Hf3sqh5NLHETJNtyNMxaiTe.jpg?size=200x0&quality=96&crop=18,0,586,594&ava=1",countLikes:"3"}],profile:null,isFetching:!1,defaultStatusText:"\u0421\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0435\u0442.",statusText:"\u0421\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0435\u0442.",lookingAtMyProfile:!0,redrawToProfileComponent:!0},p=(t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PROFILE":return Object(c.a)(Object(c.a)({},e),{},{profile:Object(c.a)(Object(c.a)({},t.profile),{},{photos:Object(c.a)(Object(c.a)({},t.profile.photos),{},{large:t.profile.photos.large||s.a})})});case"ADD-POST":return Object(c.a)(Object(c.a)({},e),{},{posts:[].concat(Object(o.a)(e.posts),[{content:t.message,imgSrc:"http://sun9-44.userapi.com/s/v1/if1/qw3vWR63rnWIPexrEErujILvop-GpxX8MJRJx1emFNrgy2Ve9Hf3sqh5NLHETJNtyNMxaiTe.jpg?size=200x0&quality=96&crop=18,0,586,594&ava=1",countLikes:"222"}]),newPostText:""});case"START_FETCHING":return Object(c.a)(Object(c.a)({},e),{},{isFetching:!0});case"STOP_FETCHING":return Object(c.a)(Object(c.a)({},e),{},{isFetching:!1});case"UPDATE_STATUS_TEXT":var n=t.statusText&&""!==t.statusText?t.statusText:"\u0421\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0435\u0442.";return Object(c.a)(Object(c.a)({},e),{},{statusText:n});case"SET_FLAG_LOOKING_AT_MY_PROFILE":return Object(c.a)(Object(c.a)({},e),{},{lookingAtMyProfile:!0});case"SET_FLAG_NOT_LOOKING_AT_MY_PROFILE":return Object(c.a)(Object(c.a)({},e),{},{lookingAtMyProfile:!1});case"GET_STATUS":var a=t.statusText&&""!==t.statusText?t.statusText:"\u0421\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0435\u0442.";return Object(c.a)(Object(c.a)({},e),{},{statusText:a});case"UPDATE_PROFILE_PICTURE":return Object(c.a)(Object(c.a)({},e),{},{profile:Object(c.a)(Object(c.a)({},e.profile),{},{photos:Object(c.a)({},t.imagefile)})});case"SAVE_PROFILE":return Object(c.a)(Object(c.a)({},e),{},{profile:Object(c.a)(Object(c.a)({},e.profile),t.profile)});default:return e}},function(e){return{type:"SET_USER_PROFILE",profile:e}}),g=function(e){return{type:"UPDATE_PROFILE_PICTURE",imagefile:e}},m=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n,a){var i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=T(e,a().auth.isAuth,a().auth.userId,l.a),n(i={type:"START_FETCHING"}),t.next=5,u.d.getProfile(e);case 5:200===(o=t.sent).status&&(i=p(o.data),n(i),n(i={type:"STOP_FETCHING"}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},d=function(e){return function(t){t({type:"ADD-POST",message:e})}},h=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.d.updateStatus(e);case 2:200===t.sent.status&&n({type:"UPDATE_STATUS_TEXT",statusText:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(){return function(e){e({type:"SET_FLAG_LOOKING_AT_MY_PROFILE"})}},_=function(){return function(e){e({type:"SET_FLAG_NOT_LOOKING_AT_MY_PROFILE"})}},E=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n,a){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=T(e,a().auth.isAuth,a().auth.userId,l.a),t.next=3,u.d.getStatus(e);case 3:200===(i=t.sent).status&&(r=i.data,n({type:"GET_STATUS",statusText:r}));case 5:case"end":return t.stop()}var r}),t)})));return function(e,n){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n){var a,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.d.updateProfilePicture(e);case 2:0===(a=t.sent).data.resultCode?(i=g(a.data.data.photos),n(i)):console.log("\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0430\u0441\u044c, \u043d\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430!");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(n,a){var i,o,c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a().auth.userId,t.next=3,u.d.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=9;break}return t.next=7,u.d.getProfile(i);case 7:200===(c=t.sent).status&&(s=p(c.data),n(s));case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},T=function(e,t,n,a){return console.log("id ",e,"isAuth ",t?"\u0434\u0430":"\u043d\u0435\u0442","myId ",n,"defaultId ",a),e||(e=t?n:a),console.log("\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e id ",e),e}},36:function(e,t,n){e.exports={authorizationPanelWrapper:"AuthorizationPanel_authorizationPanelWrapper__1HPSL",authorizationPanelInfo:"AuthorizationPanel_authorizationPanelInfo__xRofq",authorizationPanel:"AuthorizationPanel_authorizationPanel__2InEg",infoText:"AuthorizationPanel_infoText__3jks1"}},50:function(e,t,n){e.exports={default:"FormControls_default__3asuf",correct:"FormControls_correct__1wgA3",inCorrect:"FormControls_inCorrect__3u56-",promptText:"FormControls_promptText__3mvum",inCorrectSubmitDataHint:"FormControls_inCorrectSubmitDataHint__3Us35"}},60:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(1),r={initializeTheApplication:!1,controlPanels:!1},i=function(e){return function(t){t(function(e){return{type:"INITIALIZE_THE_APPLICATION",initializeTheApplication:e}}(e))}},o=function(e){return function(t,n){e=Number(e);var a=n().auth.userId,r=n().auth.isAuth;if(e&&e===a)t({type:"OPEN_CONTROL_PANEL"});else if(e){t({type:"CLOSE_CONTROL_PANEL"})}else if(r){t({type:"OPEN_CONTROL_PANEL"})}else if(!r){t({type:"CLOSE_CONTROL_PANEL"})}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_THE_APPLICATION":return Object(a.a)(Object(a.a)({},e),{},{initializeTheApplication:t.initializeTheApplication});case"OPEN_CONTROL_PANEL":return Object(a.a)(Object(a.a)({},e),{},{controlPanels:!0});case"CLOSE_CONTROL_PANEL":return Object(a.a)(Object(a.a)({},e),{},{controlPanels:!1});default:return e}}},65:function(e,t,n){e.exports={friendContainer:"Friend_friendContainer__1rLX-",photo:"Friend_photo__1FsUN",name:"Friend_name__2H3tN"}},66:function(e,t,n){e.exports={authorizationItem:"AuthorizationItem_authorizationItem__1A_WQ",authorizationImg:"AuthorizationItem_authorizationImg__1PfDF",authorizationText:"AuthorizationItem_authorizationText__SXoAY"}},84:function(e,t,n){},91:function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return d}));var a,r=n(3),i=n.n(r),o=n(8),c=n(5),u=n(1),s=n(29),l=n(11),f=n(28),p=(a={messages:[],dialogsData:[],dialogs:[]},Object(s.a)(a,"messages",{totalCount:null,items:[]}),Object(s.a)(a,"interlocutors",[]),a);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(u.a)(Object(u.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),[{id:6,message:t.newMessage}]),newMessageBody:""});case"START_COMMUNICATION":return Object(u.a)(Object(u.a)({},e),{},{interlocutors:[].concat(Object(c.a)(e.interlocutors),[t.interlocutor])});case"GET_ALL_DIALOGS":return Object(u.a)(Object(u.a)({},e),{},{dialogs:Object(c.a)(t.dialogs.map((function(e){return e.photos.small||(e.photos.small=f.a),e.photos.large||(e.photos.large=f.a),e})))});case"GET_MESSAGES":return Object(u.a)(Object(u.a)({},e),{},{messages:t.messages});default:return e}};var g=function(e){return function(t){t({type:"SEND-MESSAGE",newMessage:e})}},m=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.startCommunication(e);case 2:a=t.sent,n({type:"START_COMMUNICATION",interlocutor:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.getAllDialogs();case 2:n=e.sent,a=n.data,t({type:"GET_ALL_DIALOGS",dialogs:a});case 5:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()}},92:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f}));var a=n(3),r=n.n(a),i=n(8),o=n(1),c=n(11),u=(n(28),{messages:[],totalCount:null,error:null}),s=function(e){return{type:"GET_MESSAGES",messages:e}},l=function(e,t){return function(){var n=Object(i.a)(r.a.mark((function n(a){var i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,c.c.sendMessage(e,t);case 3:i=n.sent,a({type:"SEND-MESSAGE",newMessage:i});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return function(){var a=Object(i.a)(r.a.mark((function a(i){var o,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.c.getMessages(e,t,n);case 2:o=a.sent,u=s(o.data),i(u);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(o.a)({},e);case"GET_MESSAGES":return Object(o.a)(Object(o.a)({},e),{},{messages:t.messages.items,totalCount:t.messages.totalCount});default:return e}}}},[[174,1,2]]]);
//# sourceMappingURL=main.aadb58c8.chunk.js.map